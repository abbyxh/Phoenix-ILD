"use strict";(self.webpackChunkphoenix_for_ild=self.webpackChunkphoenix_for_ild||[]).push([[855],{2855:(M,m,p)=>{p.r(m),p.d(m,{TWebPaintingPainter:()=>y});var O=p(467),A=p(6823),B=p(6224);class y extends B.JW{updateObject(e){return!!this.matchObjectType(e)&&(this.assignObject(e),!0)}redraw(){var e=this;return(0,O.A)(function*(){const r=e.getObject(),n=e.getAxisToSvgFunc();if(!r?.fOper||!n)return;let x,T,a,o=0,f={},_=null,b="none",d="";const c=r.fOper.split(";"),u=t=>{if(t!==b&&(_&&(_.attr("d",d),d="",_=null,b="none"),t))switch(b=t,_=e.draw_g.append("svg:path"),t){case"f":_.call(e.fillatt.func);break;case"l":_.call(e.lineatt.func).style("fill","none");break;case"m":_.call(e.markeratt.func)}},P=(t,h)=>{let i=0;const s={_typename:"any"};for(let l=0;l<h.length;++l){const g=t.indexOf(":",i+1);s[h[l]]=parseInt(t.slice(i+1,g>i?g:void 0)),i=g}return s},w=t=>{for(;++t<c.length;)switch(x=c[t][0],x){case"z":e.createAttLine({attr:P(c[t],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),u();continue;case"y":e.createAttFill({attr:P(c[t],["fFillColor","fFillStyle"]),force:!0}),u();continue;case"x":e.createAttMarker({attr:P(c[t],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),u();continue;case"o":f=P(c[t],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),f.fTextSize<0&&(f.fTextSize*=-.001),u();continue;case"r":case"b":{u("b"===x?"f":"l");const h=n.x(r.fBuf[o++]),i=n.y(r.fBuf[o++]),s=n.x(r.fBuf[o++]),l=n.y(r.fBuf[o++]);d+=`M${h},${i}h${s-h}v${l-i}h${h-s}z`;continue}case"l":case"f":for(u(x),T=parseInt(c[t].slice(1)),a=0;a<T;++a)d+=`${a>0?"L":"M"}${n.x(r.fBuf[o++])},${n.y(r.fBuf[o++])}`;"f"===x&&(d+="Z");continue;case"m":for(u(x),T=parseInt(c[t].slice(1)),e.markeratt.resetPos(),a=0;a<T;++a)d+=e.markeratt.create(n.x(r.fBuf[o++]),n.y(r.fBuf[o++]));continue;case"h":case"t":if(f.fTextSize){u();const h=f.fTextSize>1?f.fTextSize:e.getPadPainter().getPadHeight()*f.fTextSize,i=e.draw_g.append("svg:g");let s=f.fTextAngle,l=c[t].slice(1);if(s>=360&&(s-=360*Math.floor(s/360)),e.startTextDrawing(f.fTextFont,h,i),"h"===x){let g="";for(a=0;a<l.length;a+=2)g+=String.fromCharCode(parseInt(l.slice(a,a+2),16));l=g}return e.drawText({align:f.fTextAlign,x:n.x(r.fBuf[o++]),y:n.y(r.fBuf[o++]),rotate:-s,text:l,color:(0,A.oU)(f.fTextColor),latex:0,draw_g:i}),e.finishTextDrawing(i).then(()=>w(t))}continue;default:console.log(`unsupported operation ${x}`)}return Promise.resolve(!0)};return e.createG(),w(-1).then(()=>(u(),e))})()}static draw(e,r){return(0,O.A)(function*(){const n=new y(e,r);return n.addToPadPrimitives(),n.redraw()})()}}}}]);